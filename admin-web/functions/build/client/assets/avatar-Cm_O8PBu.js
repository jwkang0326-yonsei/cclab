import{r as u,j as d}from"./chunk-LSOULM7L-CE8sSiXH.js";import{c as w,u as R,a as f}from"./index-mkzE_evR.js";import{P as v}from"./index-ll88vSaB.js";import{a as m}from"./button-ZU_4EZ5Z.js";var g="Avatar",[j,H]=w(g),[C,S]=j(g),x=u.forwardRef((a,e)=>{const{__scopeAvatar:n,...r}=a,[o,t]=u.useState("idle");return d.jsx(C,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:t,children:d.jsx(v.span,{...r,ref:e})})});x.displayName=g;var L="AvatarImage",E=u.forwardRef((a,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...t}=a,l=S(L,n),s=y(r,t),i=R(c=>{o(c),l.onImageLoadingStatusChange(c)});return f(()=>{s!=="idle"&&i(s)},[s,i]),s==="loaded"?d.jsx(v.img,{...t,ref:e,src:r}):null});E.displayName=L;var I="AvatarFallback",b=u.forwardRef((a,e)=>{const{__scopeAvatar:n,delayMs:r,...o}=a,t=S(I,n),[l,s]=u.useState(r===void 0);return u.useEffect(()=>{if(r!==void 0){const i=window.setTimeout(()=>s(!0),r);return()=>window.clearTimeout(i)}},[r]),l&&t.imageLoadingStatus!=="loaded"?d.jsx(v.span,{...o,ref:e}):null});b.displayName=I;function p(a,e){return a?e?(a.src!==e&&(a.src=e),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function y(a,{referrerPolicy:e,crossOrigin:n}){const r=_(),o=u.useRef(null),t=r?(o.current||(o.current=new window.Image),o.current):null,[l,s]=u.useState(()=>p(t,a));return f(()=>{s(p(t,a))},[t,a]),f(()=>{const i=h=>()=>{s(h)};if(!t)return;const c=i("loaded"),A=i("error");return t.addEventListener("load",c),t.addEventListener("error",A),e&&(t.referrerPolicy=e),typeof n=="string"&&(t.crossOrigin=n),()=>{t.removeEventListener("load",c),t.removeEventListener("error",A)}},[t,n,e]),l}function N(){return()=>{}}function _(){return u.useSyncExternalStore(N,()=>!0,()=>!1)}var k=x,F=E,M=b;function q({className:a,...e}){return d.jsx(k,{"data-slot":"avatar",className:m("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...e})}function B({className:a,...e}){return d.jsx(F,{"data-slot":"avatar-image",className:m("aspect-square size-full",a),...e})}function G({className:a,...e}){return d.jsx(M,{"data-slot":"avatar-fallback",className:m("bg-muted flex size-full items-center justify-center rounded-full",a),...e})}export{q as A,B as a,G as b};
